import numpy as np
from independent_suspension import Five_Link
from suspension_components import A_Arm


def test_A():
    frame_pickups = np.array([[31,32,33],
                                [34,35,36],
                                [37,38,39],
                                [40,41,42],
                                [43,44,45]])
    
    upright_pickups = np.array([[1,2,3],
                                [4,5,6],
                                [7,8,9],
                                [10,11,12],
                                [13,14,15]])
    
    lengths = np.array([21,22,23,24,25])

    correct_output = np.array([[1,0,0, 1,0,0,2,0,0,3,0,0,    -21,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                               [0,1,0, 0,1,0,0,2,0,0,3,0,    0,-21,0,0,0,0,0,0,0,0,0,0,0,0,0],
                               [0,0,1, 0,0,1,0,0,2,0,0,3,    0,0,-21,0,0,0,0,0,0,0,0,0,0,0,0],
                               [1,0,0, 4,0,0,5,0,0,6,0,0,    0,0,0,-22,0,0,0,0,0,0,0,0,0,0,0],
                               [0,1,0, 0,4,0,0,5,0,0,6,0,    0,0,0,0,-22,0,0,0,0,0,0,0,0,0,0],
                               [0,0,1, 0,0,4,0,0,5,0,0,6,    0,0,0,0,0,-22,0,0,0,0,0,0,0,0,0],
                               [1,0,0, 7,0,0,8,0,0,9,0,0,    0,0,0,0,0,0,-23,0,0,0,0,0,0,0,0],
                               [0,1,0, 0,7,0,0,8,0,0,9,0,    0,0,0,0,0,0,0,-23,0,0,0,0,0,0,0],
                               [0,0,1, 0,0,7,0,0,8,0,0,9,    0,0,0,0,0,0,0,0,-23,0,0,0,0,0,0],
                               [1,0,0, 10,0,0,11,0,0,12,0,0, 0,0,0,0,0,0,0,0,0,-24,0,0,0,0,0],
                               [0,1,0, 0,10,0,0,11,0,0,12,0, 0,0,0,0,0,0,0,0,0,0,-24,0,0,0,0],
                               [0,0,1, 0,0,10,0,0,11,0,0,12, 0,0,0,0,0,0,0,0,0,0,0,-24,0,0,0],
                               [1,0,0, 13,0,0,14,0,0,15,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,-25,0,0],
                               [0,1,0, 0,13,0,0,14,0,0,15,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,-25,0],
                               [0,0,1, 0,0,13,0,0,14,0,0,15, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,-25] ])
 
    fl = Five_Link(frame_pickups, lengths, upright_pickups)
    
    assert np.array_equal(fl.gen_A(upright_pickups, lengths), correct_output)


def test_B():
    frame_pickups = np.array([[31,32,33],
                                [34,35,36],
                                [37,38,39],
                                [40,41,42],
                                [43,44,45]])
    
    upright_pickups = np.array([[1,2,3],
                                [4,5,6],
                                [7,8,9],
                                [10,11,12],
                                [13,14,15]])
    
    lengths = np.array([21,22,23,24,25])
    
    correct_output = np.array([[31],
                                [32],
                                [33],
                                [34],
                                [35],
                                [36],
                                [37],
                                [38],
                                [39],
                                [40],
                                [41],
                                [42],
                                [43],
                                [44],
                                [45]])

    fl = Five_Link(frame_pickups, lengths, upright_pickups)

    assert np.array_equal(fl.gen_B(frame_pickups), correct_output)


